{"version":3,"file":"ngx-pinch-zoom.umd.js","sources":["ng://ngx-pinch-zoom/lib/interfaces.ts","ng://ngx-pinch-zoom/lib/properties.ts","ng://ngx-pinch-zoom/lib/touches.ts","ng://ngx-pinch-zoom/lib/ivypinch.ts","ng://ngx-pinch-zoom/lib/pinch-zoom.component.ts","ng://ngx-pinch-zoom/lib/pinch-zoom.module.ts"],"sourcesContent":["export interface Properties {\n    \"transition-duration\"?: number;\n    \"double-tap\"?: boolean;\n    \"double-tap-scale\"?: number;\n    \"auto-zoom-out\"?: boolean;\n    \"limit-zoom\"?: number | \"original image size\";\n    \"disabled\"?: number;\n    \"element\"?: string;\n    \"disablePan\"?: boolean;\n    \"overflow\"?: \"hidden\" | \"visible\";\n    \"disableZoomControl\"?: \"disable\" | \"never\" | \"auto\";\n    \"zoomControlScale\"?: number;\n    \"backgroundColor\"?: string;\n    \"limitPan\"?: boolean;\n    \"minPanScale\"?: number;\n    \"minScale\"?: number;\n    \"eventHandler\"?: any;\n    \"listeners\"?: \"auto\" | \"mouse and touch\";\n    \"wheel\"?: boolean;\n    \"autoHeight\"?: boolean;\n    \"wheelZoomFactor\"?: number;\n    \"draggableImage\"?: boolean;\n}","export const defaultProperties = {\n    transitionDuration: 200,\n    doubleTap: true,\n    doubleTapScale: 2,\n    limitZoom: \"original image size\",\n    autoZoomOut: false,\n    disabled: false,\n    overflow: \"hidden\",\n    zoomControlScale: 1,\n    backgroundColor: \"rgba(0,0,0,0.85)\",\n    minScale: 0,\n    minPanScale: 1.0001,\n    disableZoomControl: \"auto\",\n    listeners: \"mouse and touch\",\n    wheel: true,\n    wheelZoomFactor: 0.2,\n    draggableImage: false\n}\n\nexport const backwardCompatibilityProperties = {\n    \"transition-duration\": \"transitionDuration\",\n    \"double-tap\": \"doubleTap\",\n    \"double-tap-scale\": \"doubleTapScale\",\n    \"zoom-button\": \"zoomButton\",\n    \"auto-zoom-out\": \"autoZoomOut\",\n    \"limit-zoom\": \"limitZoom\"\n}","export interface Properties {\r\n    element: HTMLElement;\r\n    listeners?: 'auto' | 'mouse and touch';\r\n    resize?: boolean;\r\n}\r\n\r\nexport type EventType = undefined | 'touchend' | 'pan' | 'pinch' | 'horizontal-swipe' | 'vertical-swipe' | 'tap' | 'longtap';\r\nexport type TouchHandler = 'handleTouchstart' | 'handleTouchmove' | 'handleTouchend';\r\nexport type MouseHandler = 'handleMousedown' | 'handleMousemove' | 'handleMouseup';\r\n\r\nexport class Touches {\r\n    properties: Properties;\r\n    element: HTMLElement;\r\n    elementPosition: ClientRect;\r\n    eventType: EventType = undefined;\r\n    handlers: any = {};\r\n    startX = 0;\r\n    startY = 0;\r\n    lastTap = 0;\r\n    doubleTapTimeout: any;\r\n    doubleTapMinTimeout = 300;\r\n    tapMinTimeout = 200;\r\n    touchstartTime = 0;\r\n    i: number = 0;\r\n    isMousedown = false;\r\n\r\n    touchListeners: any = {\r\n        \"touchstart\": \"handleTouchstart\",\r\n        \"touchmove\": \"handleTouchmove\",\r\n        \"touchend\": \"handleTouchend\"\r\n    }\r\n    mouseListeners: any = {\r\n        \"mousedown\": \"handleMousedown\",\r\n        \"mousemove\": \"handleMousemove\",\r\n        \"mouseup\": \"handleMouseup\",\r\n        \"wheel\": \"handleWheel\"\r\n    }\r\n    otherListeners: any = {\r\n        \"resize\": \"handleResize\"\r\n    }\r\n\r\n    constructor(properties: Properties) {\r\n        this.properties = properties;\r\n        this.element = this.properties.element;\r\n        this.elementPosition = this.getElementPosition();\r\n\r\n        this.toggleEventListeners('addEventListener');\r\n    }\r\n\r\n    destroy() {\r\n        this.toggleEventListeners('removeEventListener');\r\n    }\r\n\r\n    toggleEventListeners(action: 'addEventListener' | 'removeEventListener') {\r\n        let listeners;\r\n\r\n        if (this.properties.listeners === 'mouse and touch') {\r\n            listeners = Object.assign(this.touchListeners, this.mouseListeners);\r\n        } else {\r\n            listeners = this.detectTouchScreen() ? this.touchListeners : this.mouseListeners;\r\n        }\r\n\r\n        if (this.properties.resize) {\r\n            listeners = Object.assign(listeners, this.otherListeners);\r\n        }\r\n\r\n        for (var listener in listeners) {\r\n            const handler: MouseHandler = listeners[listener];\r\n\r\n            // Window\r\n            if (listener === \"resize\") {\r\n                if (action === 'addEventListener') {\r\n                    window.addEventListener(listener, this[handler], false);\r\n                }\r\n                if (action === 'removeEventListener') {\r\n                    window.removeEventListener(listener, this[handler], false);\r\n                }\r\n            // Document\r\n            } else if (listener === 'mouseup' || listener === \"mousemove\") {\r\n                if (action === 'addEventListener') {\r\n                    document.addEventListener(listener, this[handler], false);\r\n                }\r\n                if (action === 'removeEventListener') {\r\n                    document.removeEventListener(listener, this[handler], false);\r\n                }\r\n            // Element\r\n            } else {\r\n                if (action === 'addEventListener') {\r\n                    this.element.addEventListener(listener, this[handler], false);\r\n                }\r\n                if (action === 'removeEventListener') {\r\n                    this.element.removeEventListener(listener, this[handler], false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Listeners\r\n     */\r\n\r\n    /* Touchstart */\r\n\r\n    handleTouchstart = (event: any) => {\r\n        this.elementPosition = this.getElementPosition();\r\n        this.touchstartTime = new Date().getTime();\r\n\r\n        if (this.eventType === undefined) {\r\n            this.getTouchstartPosition(event);\r\n        }\r\n\r\n        this.runHandler(\"touchstart\", event);\r\n    }\r\n\r\n\r\n    /* Touchmove */\r\n\r\n    handleTouchmove = (event: any) => {\r\n        const touches = event.touches;\r\n\r\n        // Pan\r\n        if (this.detectPan(touches)) {\r\n            this.runHandler(\"pan\", event);\r\n        }\r\n\r\n        // Pinch\r\n        if (this.detectPinch(event)) {\r\n            this.runHandler(\"pinch\", event);\r\n        }\r\n    }\r\n\r\n    handleLinearSwipe(event: any) {\r\n        //event.preventDefault();\r\n\r\n        this.i++;\r\n\r\n        if (this.i > 3) {\r\n            this.eventType = this.getLinearSwipeType(event);\r\n        }\r\n\r\n        if (this.eventType === 'horizontal-swipe') {\r\n            this.runHandler('horizontal-swipe', event);\r\n        }\r\n\r\n        if (this.eventType === 'vertical-swipe') {\r\n            this.runHandler('vertical-swipe', event);\r\n        }\r\n    }\r\n\r\n\r\n    /* Touchend */\r\n\r\n    handleTouchend = (event: any) => {\r\n        const touches = event.touches;\r\n\r\n        // Double Tap\r\n        if (this.detectDoubleTap()) {\r\n            this.runHandler(\"double-tap\", event);\r\n        }\r\n\r\n        // Tap\r\n        this.detectTap();\r\n\r\n        this.runHandler(\"touchend\", event);\r\n        this.eventType = 'touchend';\r\n\r\n        if (touches && touches.length === 0) {\r\n            this.eventType = undefined;\r\n            this.i = 0;\r\n        }\r\n    }\r\n\r\n\r\n    /* Mousedown */\r\n\r\n    handleMousedown = (event: any) => {\r\n        this.isMousedown = true;\r\n        this.elementPosition = this.getElementPosition();\r\n        this.touchstartTime = new Date().getTime();\r\n\r\n        if (this.eventType === undefined) {\r\n            this.getMousedownPosition(event);\r\n        }\r\n\r\n        this.runHandler(\"mousedown\", event);\r\n    }\r\n\r\n\r\n    /* Mousemove */\r\n\r\n    handleMousemove = (event: any) => {\r\n        //event.preventDefault();\r\n        \r\n        if (!this.isMousedown) {\r\n            return;\r\n        }\r\n\r\n        // Pan\r\n        this.runHandler(\"pan\", event);\r\n\r\n        // Linear swipe\r\n        switch (this.detectLinearSwipe(event)) {\r\n            case \"horizontal-swipe\":\r\n                event.swipeType = \"horizontal-swipe\";\r\n                this.runHandler(\"horizontal-swipe\", event);\r\n                break;\r\n            case \"vertical-swipe\":\r\n                event.swipeType = \"vertical-swipe\";\r\n                this.runHandler(\"vertical-swipe\", event);\r\n                break;\r\n        }\r\n\r\n        // Linear swipe\r\n        if (this.detectLinearSwipe(event) ||\r\n            this.eventType === 'horizontal-swipe' ||\r\n            this.eventType === 'vertical-swipe') {\r\n\r\n            this.handleLinearSwipe(event);\r\n        }\r\n    }\r\n\r\n\r\n    /* Mouseup */\r\n\r\n    handleMouseup = (event: any) => {\r\n\r\n        // Tap\r\n        this.detectTap();\r\n\r\n        this.isMousedown = false;\r\n        this.runHandler(\"mouseup\", event);\r\n        this.eventType = undefined;\r\n        this.i = 0;\r\n    }\r\n\r\n\r\n    /* Wheel */\r\n\r\n    handleWheel = (event: any) => {\r\n        this.runHandler(\"wheel\", event);\r\n    }\r\n\r\n    /* Resize */\r\n\r\n    handleResize = (event: any) => {\r\n        this.runHandler(\"resize\", event);\r\n    }\r\n\r\n    runHandler(eventName: any, response: any) {\r\n        if (this.handlers[eventName]) {\r\n            this.handlers[eventName](response);\r\n        }\r\n    }\r\n\r\n\r\n    /*\r\n     * Detection\r\n     */\r\n\r\n    detectPan(touches: any) {\r\n        return touches.length === 1 && !this.eventType || this.eventType === 'pan';\r\n    }\r\n\r\n    detectDoubleTap() {\r\n        if (this.eventType != undefined) {\r\n            return;\r\n        }\r\n\r\n        const currentTime = new Date().getTime();\r\n        const tapLength = currentTime - this.lastTap;\r\n\r\n        clearTimeout(this.doubleTapTimeout);\r\n\r\n        if (tapLength < this.doubleTapMinTimeout && tapLength > 0) {\r\n            return true;\r\n        } else {\r\n            this.doubleTapTimeout = setTimeout(() => {\r\n                clearTimeout(this.doubleTapTimeout);\r\n            }, this.doubleTapMinTimeout);\r\n        }\r\n        this.lastTap = currentTime;\r\n    }\r\n\r\n    detectTap(): void {\r\n        if (this.eventType != undefined) {\r\n            return;\r\n        }\r\n\r\n        const currentTime = new Date().getTime();\r\n        const tapLength = currentTime - this.touchstartTime;\r\n\r\n        if (tapLength > 0) {\r\n            if (tapLength < this.tapMinTimeout) {\r\n                this.runHandler(\"tap\", event);\r\n            } else {\r\n                this.runHandler(\"longtap\", event);\r\n            }\r\n        }\r\n    }\r\n\r\n    detectPinch(event: any) {\r\n        const touches = event.touches;\r\n        return (touches.length === 2 && this.eventType === undefined) || this.eventType === 'pinch';\r\n    }\r\n\r\n    detectLinearSwipe(event: any) {\r\n        const touches = event.touches;\r\n\r\n        if (touches) {\r\n            if (touches.length === 1 && !this.eventType || this.eventType === 'horizontal-swipe' || this.eventType === 'vertical-swipe') {\r\n                return this.getLinearSwipeType(event);\r\n            }\r\n        } else {\r\n            if (!this.eventType || this.eventType === 'horizontal-swipe' || this.eventType === 'vertical-swipe') {\r\n                return this.getLinearSwipeType(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    getLinearSwipeType(event: any) {\r\n        if (this.eventType !== 'horizontal-swipe' && this.eventType !== 'vertical-swipe') {\r\n            const movementX = Math.abs(this.moveLeft(0, event) - this.startX);\r\n            const movementY = Math.abs(this.moveTop(0, event) - this.startY);\r\n\r\n            if ((movementY * 3) > movementX) {\r\n                return 'vertical-swipe';\r\n            } else {\r\n                return 'horizontal-swipe';\r\n            }\r\n        } else {\r\n            return this.eventType;\r\n        }\r\n    }\r\n\r\n    getElementPosition() {\r\n        return this.element.getBoundingClientRect();\r\n    }\r\n\r\n    getTouchstartPosition(event: any) {\r\n        this.startX = event.touches[0].clientX - this.elementPosition.left;\r\n        this.startY = event.touches[0].clientY - this.elementPosition.top;\r\n    }\r\n\r\n    getMousedownPosition(event: any) {\r\n        this.startX = event.clientX - this.elementPosition.left;\r\n        this.startY = event.clientY - this.elementPosition.top;\r\n    }\r\n\r\n    moveLeft(index: any, event: any) {\r\n        const touches = event.touches;\r\n\r\n        if (touches) {\r\n            return touches[index].clientX - this.elementPosition.left;\r\n        } else {\r\n            return event.clientX - this.elementPosition.left;\r\n        }\r\n    }\r\n\r\n    moveTop(index: any, event: any) {\r\n        const touches = event.touches;\r\n\r\n        if (touches) {\r\n            return touches[index].clientY - this.elementPosition.top;\r\n        } else {\r\n            return event.clientY - this.elementPosition.top;\r\n        }\r\n    }\r\n\r\n    detectTouchScreen() {\r\n        var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\r\n        var mq = function(query: any) {\r\n            return window.matchMedia(query).matches;\r\n        }\r\n\r\n        if (('ontouchstart' in window)) {\r\n            return true;\r\n        }\r\n\r\n        // include the 'heartz' as a way to have a non matching MQ to help terminate the join\r\n        // https://git.io/vznFH\r\n        var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\r\n        return mq(query);\r\n    }\r\n\r\n\r\n    /* Public properties and methods */\r\n    on(event: EventType, handler: Function) {\r\n        if (event) {\r\n            this.handlers[event] = handler;\r\n        }\r\n    }\r\n}","import {Touches} from './touches';\n\nexport interface IvyPinchProperties {\n    element: string;\n    key ? : string;\n    doubleTap ? : boolean;\n    doubleTapScale ? : number;\n    zoomControlScale ? : number;\n    transitionDuration ? : number;\n    autoZoomOut ? : boolean;\n    limitZoom ? : number | \"original image size\";\n    disablePan ? : boolean;\n    limitPan ? : boolean;\n    minPanScale ? : number;\n    minScale ? : number;\n    eventHandler ? : any;\n    listeners ? : \"auto\" | \"mouse and touch\";\n    wheel ? : boolean;\n    autoHeight ? : boolean;\n    wheelZoomFactor ? : number;\n    draggableImage ? : boolean;\n}\n\nexport const IvyPinchDefaultProperties = {\n    doubleTap: true,\n    doubleTapScale: 2,\n    transitionDuration: 200,\n    limitZoom: \"original image size\",\n    minScale: 0,\n    minPanScale: 1.0001,\n    wheel: true,\n    wheelZoomFactor: 0.2,\n    draggableImage: true,\n    listeners: 'auto',\n    zoomControlScale: 2\n}\n\nexport class IvyPinch {\n    properties: IvyPinchProperties;\n    touches: any;\n    element: any;\n    elementTarget: any;\n    parentElement: any;\n    i: number = 0;\n    public scale: number = 1;\n    initialScale: number = 1;\n    elementPosition: any;\n    eventType: any;\n    startX: number = 0;\n    startY: number = 0;\n    moveX: number = 0;\n    moveY: number = 0;\n    initialMoveX: number = 0;\n    initialMoveY: number = 0;\n    moveXC: number = 0;\n    moveYC: number = 0;\n    lastTap: number = 0;\n    draggingMode: boolean = false;\n    distance: number = 0;\n    doubleTapTimeout: number = 0;\n    initialDistance: number = 0;\n    events: any = {};\n    maxHtmlContentScale: number = 3;\n    maxScale: number = 3;\n\n    constructor(properties: any) {\n        this.element = properties.element;\n        this.elementTarget = this.element.querySelector('*').tagName;\n        this.parentElement = this.element.parentElement;\n        this.properties = Object.assign({}, IvyPinchDefaultProperties, properties);\n        this.pollLimitZoom();\n\n        this.touches = new Touches({\n            element: properties.element,\n            listeners: this.properties.listeners,\n            resize: this.properties.autoHeight\n        });\n\n\n        /* Init */\n        this.setBasicStyles();\n\n        /*\n         * Listeners\n         */\n\n        this.touches.on('touchstart', this.handleTouchstart);\n        this.touches.on('touchend', this.handleTouchend);\n        this.touches.on('mousedown', this.handleTouchstart);\n        this.touches.on('mouseup', this.handleTouchend);\n        this.touches.on('pan', this.handlePan);\n        this.touches.on('mousemove', this.handlePan);\n        this.touches.on('pinch', this.handlePinch);\n\n        if (this.properties.wheel) {\n            this.touches.on('wheel', this.handleWheel);\n        }\n\n        if (this.properties.doubleTap) {\n            this.touches.on('double-tap', this.handleDoubleTap);\n        }\n\n        if (this.properties.autoHeight) {\n            this.touches.on('resize', this.handleResize);\n        }\n    }\n\n\n    /* Touchstart */\n\n    handleTouchstart = (event: any) => {\n        this.getElementPosition();\n\n        if (this.eventType === undefined) {\n            this.getTouchstartPosition(event);\n        }\n    }\n\n\n    /* Touchend */\n\n    handleTouchend = (event: any) => {\n\n        /* touchend */\n        if (event.type === \"touchend\") {\n            this.i = 0;\n            this.draggingMode = false;\n            const touches = event.touches;\n\n            // Min scale\n            if (this.scale < 1) {\n                this.scale = 1;\n            }\n\n            // Auto Zoom Out\n            if (this.properties.autoZoomOut && this.eventType === 'pinch') {\n                this.scale = 1;\n            }\n\n            // Align image\n            if (this.eventType === 'pinch' || \n                this.eventType === 'pan' && this.scale > this.properties.minPanScale) {\n\n                this.alignImage();\n            }\n\n            // Update initial values\n            if (this.eventType === 'pinch' ||\n                this.eventType === 'pan' ||\n                this.eventType === 'horizontal-swipe' ||\n                this.eventType === 'vertical-swipe') {\n\n                this.updateInitialValues();\n            }\n\n            this.eventType = 'touchend';\n\n            if (touches && touches.length === 0) {\n                this.eventType = undefined;\n            }\n        }\n\n        /* mouseup */\n        if (event.type === \"mouseup\") {\n            this.draggingMode = false;\n            this.updateInitialValues();\n            this.eventType = undefined;\n        }\n    }\n\n\n    /*\n     * Handlers\n     */\n\n    handlePan = (event: any) => {\n        if (this.scale < this.properties.minPanScale || this.properties.disablePan) {\n            return;\n        }\n\n        event.preventDefault();\n        const {\n            clientX,\n            clientY\n        } = this.getClientPosition(event);\n\n        if (!this.eventType) {\n            this.startX = clientX - this.elementPosition.left;\n            this.startY = clientY - this.elementPosition.top;\n        }\n\n        this.eventType = 'pan';\n        this.moveX = this.initialMoveX + (this.moveLeft(event, 0) - this.startX);\n        this.moveY = this.initialMoveY + (this.moveTop(event, 0) - this.startY);\n\n        if (this.properties.limitPan) {\n            this.limitPanY();\n            this.limitPanX();\n        }\n\n        /* mousemove */\n        if (event.type === \"mousemove\" && this.scale > this.properties.minPanScale) {\n            this.centeringImage();\n        }\n\n        this.transformElement(0);\n    }\n\n    handleDoubleTap = (event: any) => {\n        this.toggleZoom(event);\n        return;\n    }\n\n    handlePinch = (event: any) => {\n        event.preventDefault();\n\n        if (this.eventType === undefined || this.eventType === 'pinch') {\n            const touches = event.touches;\n\n            if (!this.eventType) {\n                this.initialDistance = this.getDistance(touches);\n\n                const moveLeft0 = this.moveLeft(event, 0);\n                const moveLeft1 = this.moveLeft(event, 1);\n                const moveTop0 = this.moveTop(event, 0);\n                const moveTop1 = this.moveTop(event, 1);\n\n                this.moveXC = ((moveLeft0 + moveLeft1) / 2) - this.initialMoveX;\n                this.moveYC = ((moveTop0 + moveTop1) / 2) - this.initialMoveY;\n            }\n\n            this.eventType = 'pinch';\n            this.distance = this.getDistance(touches);\n            this.scale = this.initialScale * (this.distance / this.initialDistance);\n            this.moveX = this.initialMoveX - (((this.distance / this.initialDistance) * this.moveXC) - this.moveXC);\n            this.moveY = this.initialMoveY - (((this.distance / this.initialDistance) * this.moveYC) - this.moveYC);\n\n            this.handleLimitZoom();\n\n            if (this.properties.limitPan) {\n                this.limitPanY();\n                this.limitPanX();\n            }\n\n            this.transformElement(0);\n        }\n    }\n\n\n    handleWheel = (event: any) => {\n        event.preventDefault();\n\n        let wheelZoomFactor = this.properties.wheelZoomFactor || 0;\n        let zoomFactor = event.deltaY < 0 ? (wheelZoomFactor) : (- wheelZoomFactor);\n        let newScale = this.initialScale + zoomFactor;\n\n        /* Round value */\n        if (newScale < (1 + wheelZoomFactor)) {\n            newScale = 1;\n        } else if (newScale < this.maxScale && newScale > this.maxScale - wheelZoomFactor) {\n            newScale = this.maxScale;\n        }\n\n        if (newScale < 1 || newScale > this.maxScale) {\n            return;\n        }\n\n        if (newScale === this.scale) {\n            return;\n        }\n\n        this.getElementPosition();\n        this.scale = newScale;\n\n        /* Get cursor position over image */\n        let xCenter = (event.clientX - this.elementPosition.left) - this.initialMoveX;\n        let yCenter = (event.clientY - this.elementPosition.top) - this.initialMoveY;\n\n        this.setZoom({\n            scale: newScale,\n            center: [xCenter, yCenter]\n        });\n    }\n\n    handleResize = (_event: any) => {\n        this.setAutoHeight();\n    }\n\n    handleLimitZoom() {\n        const limitZoom = this.maxScale;\n        const minScale = this.properties.minScale || 0;\n\n        if (this.scale > limitZoom || this.scale <= minScale) {\n            const imageWidth = this.getImageWidth();\n            const imageHeight = this.getImageHeight();\n            const enlargedImageWidth = imageWidth * this.scale;\n            const enlargedImageHeight = imageHeight * this.scale;\n            const moveXRatio = this.moveX / (enlargedImageWidth - imageWidth);\n            const moveYRatio = this.moveY / (enlargedImageHeight - imageHeight);\n\n            if (this.scale > limitZoom) {\n                this.scale = limitZoom;\n            }\n\n            if (this.scale <= minScale) {\n                this.scale = minScale;\n            }\n\n            const newImageWidth = imageWidth * this.scale;\n            const newImageHeight = imageHeight * this.scale;\n\n            this.moveX = -Math.abs((moveXRatio * (newImageWidth - imageWidth)));\n            this.moveY = -Math.abs((-moveYRatio * (newImageHeight - imageHeight)));\n        }\n    }\n\n    getLimitZoom() {\n        if (this.properties.limitZoom === \"original image size\") {\n            if (this.elementTarget === \"IMG\") {\n                let img = this.element.getElementsByTagName(\"img\")[0];\n\n                if (img.naturalWidth && img.offsetWidth) {\n                    this.maxScale = img.naturalWidth / img.offsetWidth;\n                    return this.maxScale;\n                }\n            } else {\n                this.maxScale = this.maxHtmlContentScale;\n                return this.maxScale;\n            }\n        } else {\n            this.maxScale = this.properties.limitZoom || 0;\n            return this.maxScale;\n        }\n    }\n\n    moveLeft(event: any, index: number = 0) {\n        const clientX = this.getClientPosition(event, index).clientX;\n        return clientX - this.elementPosition.left;\n    }\n\n    moveTop(event: any, index: number = 0) {\n        const clientY = this.getClientPosition(event, index).clientY;\n        return clientY - this.elementPosition.top;\n    }\n\n\n    /*\n     * Detection\n     */\n\n    centeringImage() {\n        const img = this.element.getElementsByTagName(this.elementTarget)[0];\n        const initialMoveX = this.moveX;\n        const initialMoveY = this.moveY;\n\n        if (this.moveY > 0) {\n            this.moveY = 0;\n        }\n        if (this.moveX > 0) {\n            this.moveX = 0;\n        }\n\n        if (img) {\n            this.limitPanY();\n            this.limitPanX();\n        }\n        if (img && this.scale < 1) {\n            if (this.moveX < this.element.offsetWidth * (1 - this.scale)) {\n                this.moveX = this.element.offsetWidth * (1 - this.scale);\n            }\n        }\n\n        return initialMoveX !== this.moveX || initialMoveY !== this.moveY;\n    }\n\n    limitPanY() {\n        const imgHeight = this.getImageHeight();\n        const scaledImgHeight = imgHeight * this.scale;\n        const parentHeight = this.parentElement.offsetHeight;\n        const elementHeight = this.element.offsetHeight;\n\n        if (scaledImgHeight < parentHeight) {\n            this.moveY = (parentHeight - elementHeight * this.scale) / 2;\n        } else {\n            const imgOffsetTop = ((imgHeight - elementHeight) * this.scale) / 2;\n\n            if (this.moveY > imgOffsetTop) {\n                this.moveY = imgOffsetTop;\n            } else if ((scaledImgHeight + Math.abs(imgOffsetTop) - parentHeight) + this.moveY < 0) {\n                this.moveY = -(scaledImgHeight + Math.abs(imgOffsetTop) - parentHeight);\n            }\n        }\n    }\n\n    limitPanX() {\n        const imgWidth = this.getImageWidth();\n        const scaledImgWidth = imgWidth * this.scale;\n        const parentWidth = this.parentElement.offsetWidth;\n        const elementWidth = this.element.offsetWidth;\n\n        if (scaledImgWidth < parentWidth) {\n            this.moveX = (parentWidth - elementWidth * this.scale) / 2;\n        } else {\n            const imgOffsetLeft = ((imgWidth - elementWidth) * this.scale) / 2;\n\n            if (this.moveX > imgOffsetLeft) {\n                this.moveX = imgOffsetLeft;\n            } else if ((scaledImgWidth + Math.abs(imgOffsetLeft) - parentWidth) + this.moveX < 0) {\n                this.moveX = -(imgWidth * this.scale + Math.abs(imgOffsetLeft) - parentWidth);\n            }\n        }\n    }\n\n    setBasicStyles() {\n        this.element.style.display = 'flex';\n        this.element.style.alignItems = 'center';\n        this.element.style.justifyContent = 'center';\n        this.element.style.transformOrigin = '0 0';\n        this.setImageSize();\n        this.setDraggableImage();\n    }\n\n    removeBasicStyles() {\n        this.element.style.display = '';\n        this.element.style.alignItems = '';\n        this.element.style.justifyContent = '';\n        this.element.style.transformOrigin = '';\n        this.removeImageSize();\n        this.removeDraggableImage();\n    }\n\n    setDraggableImage() {\n        const imgElement = this.getImageElement();\n\n        if (imgElement) {\n            imgElement.draggable = this.properties.draggableImage;\n        }\n    }\n\n    removeDraggableImage() {\n        const imgElement = this.getImageElement();\n\n        if (imgElement) {\n            imgElement.draggable = true;\n        }\n    }\n\n    setImageSize() {\n        const imgElement = this.element.getElementsByTagName(this.elementTarget);\n\n        if (imgElement.length) {\n            imgElement[0].style.maxWidth = '100%';\n            imgElement[0].style.maxHeight = '100%';\n\n            this.setAutoHeight();\n        }\n    }\n\n    setAutoHeight() {\n        const imgElement = this.element.getElementsByTagName(this.elementTarget);\n\n        if (!this.properties.autoHeight || !imgElement.length) {\n            return;\n        }\n\n        const imgNaturalWidth = imgElement[0].getAttribute(\"width\");\n        const imgNaturalHeight = imgElement[0].getAttribute(\"height\");\n        const sizeRatio = imgNaturalWidth / imgNaturalHeight;\n        const parentWidth = this.parentElement.offsetWidth;\n\n        imgElement[0].style.maxHeight = parentWidth / sizeRatio + \"px\";\n    }\n\n    removeImageSize() {\n        const imgElement = this.element.getElementsByTagName(this.elementTarget);\n\n        if (imgElement.length) {\n            imgElement[0].style.maxWidth = '';\n            imgElement[0].style.maxHeight = '';\n        }\n    }\n\n    getElementPosition() {\n        this.elementPosition = this.element.parentElement.getBoundingClientRect();\n    }\n\n    getTouchstartPosition(event: any) {\n        const {\n            clientX,\n            clientY\n        } = this.getClientPosition(event);\n\n        this.startX = clientX - this.elementPosition.left;\n        this.startY = clientY - this.elementPosition.top;\n    }\n\n    getClientPosition(event: any, index: number = 0) {\n        let clientX;\n        let clientY;\n\n        if (event.type === \"touchstart\" || event.type === \"touchmove\") {\n            clientX = event.touches[index].clientX;\n            clientY = event.touches[index].clientY;\n        }\n        if (event.type === \"mousedown\" || event.type === \"mousemove\") {\n            clientX = event.clientX;\n            clientY = event.clientY;\n        }\n\n        return {\n            clientX,\n            clientY\n        };\n    }\n\n    resetScale() {\n        this.scale = 1;\n        this.moveX = 0;\n        this.moveY = 0;\n        this.updateInitialValues();\n        this.transformElement(this.properties.transitionDuration);\n    }\n\n    updateInitialValues() {\n        this.initialScale = this.scale;\n        this.initialMoveX = this.moveX;\n        this.initialMoveY = this.moveY;\n    }\n\n    getDistance(touches: any) {\n        return Math.sqrt(Math.pow(touches[0].pageX - touches[1].pageX, 2) + Math.pow(touches[0].pageY - touches[1].pageY, 2));\n    }\n\n    getImageHeight() {\n        const img = this.element.getElementsByTagName(this.elementTarget)[0];\n        return img.offsetHeight;\n    }\n\n    getImageWidth() {\n        const img = this.element.getElementsByTagName(this.elementTarget)[0];\n        return img.offsetWidth;\n    }\n\n    transformElement(duration: any) {\n        this.element.style.transition = \"all \" + duration + \"ms\";\n        this.element.style.transform = \"matrix(\" + Number(this.scale) + \", 0, 0, \" + Number(this.scale) + \", \" + Number(this.moveX) + \", \" + Number(this.moveY) + \")\";\n    }\n\n    isTouchScreen() {\n        const prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n\n        if (('ontouchstart' in window)) {\n            return true;\n        }\n\n        // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n        // https://git.io/vznFH\n        const query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n        return this.getMatchMedia(query);\n    }\n\n    getMatchMedia(query: any) {\n        return window.matchMedia(query).matches;\n    }\n\n    isDragging() {\n        if (this.properties.disablePan) {\n            return false;\n        }\n\n        const imgHeight = this.getImageHeight();\n        const imgWidth = this.getImageWidth();\n\n        if (this.scale > 1) {\n            return imgHeight * this.scale > this.parentElement.offsetHeight ||\n                imgWidth * this.scale > this.parentElement.offsetWidth;\n        }\n        if (this.scale === 1) {\n            return imgHeight > this.parentElement.offsetHeight ||\n                imgWidth > this.parentElement.offsetWidth;\n        }\n    }\n\n    pollLimitZoom() {\n        let poll = setInterval(() => {\n            if (this.getLimitZoom()) {\n                clearInterval(poll);\n            }\n        }, 10);\n    }\n\n    getImageElement() {\n        const imgElement = this.element.getElementsByTagName(this.elementTarget);\n\n        if (imgElement.length) {\n            return imgElement[0];\n        }\n    }\n\n    toggleZoom(event: any = false) {\n        if (this.initialScale === 1) {\n            if (event && event.changedTouches) {\n                if (this.properties.doubleTapScale === undefined) {\n                    return;\n                }\n\n                const changedTouches = event.changedTouches;\n                this.scale = this.initialScale * this.properties.doubleTapScale;\n                this.moveX = this.initialMoveX - (changedTouches[0].clientX - this.elementPosition.left) * (this.properties.doubleTapScale - 1);\n                this.moveY = this.initialMoveY - (changedTouches[0].clientY - this.elementPosition.top) * (this.properties.doubleTapScale - 1);\n            } else {\n                let zoomControlScale = this.properties.zoomControlScale || 0;\n                this.scale = this.initialScale * (zoomControlScale + 1);\n                this.moveX = this.initialMoveX - this.element.offsetWidth * (this.scale - 1) / 2;\n                this.moveY = this.initialMoveY - this.element.offsetHeight * (this.scale - 1) / 2;\n            }\n\n            this.centeringImage();\n            this.updateInitialValues();\n            this.transformElement(this.properties.transitionDuration);\n        } else {\n            this.resetScale();\n        }\n    }\n\n    setZoom(properties: {\n        scale: number,\n        center?: number[]\n    }) {\n        this.scale = properties.scale;\n\n        let xCenter;\n        let yCenter;\n        let visibleAreaWidth = this.element.offsetWidth;\n        let visibleAreaHeight = this.element.offsetHeight;\n        let scalingPercent = (visibleAreaWidth * this.scale) / (visibleAreaWidth * this.initialScale);\n\n        if (properties.center) {\n            xCenter = properties.center[0];\n            yCenter = properties.center[1];\n        } else {\n            xCenter = visibleAreaWidth / 2 - this.initialMoveX;\n            yCenter = visibleAreaHeight / 2 - this.initialMoveY;\n        }\n\n        this.moveX = this.initialMoveX - ((scalingPercent * xCenter) - xCenter);\n        this.moveY = this.initialMoveY - ((scalingPercent * yCenter) - yCenter);\n\n        this.centeringImage();\n        this.updateInitialValues();\n        this.transformElement(this.properties.transitionDuration);\n    }\n\n    alignImage() {\n        const isMoveChanged = this.centeringImage();\n\n        if (isMoveChanged) {\n            this.updateInitialValues();\n            this.transformElement(this.properties.transitionDuration);\n        }\n    }\n\n    destroy() {\n        this.removeBasicStyles();\n        this.touches.destroy();\n    }\n}","import {ChangeDetectorRef, Component, ElementRef, HostBinding, HostListener, Input, OnDestroy, SimpleChanges} from '@angular/core';\r\n\r\nimport {Properties} from './interfaces';\r\nimport {defaultProperties, backwardCompatibilityProperties} from './properties';\r\nimport {Touches} from './touches';\r\nimport {IvyPinch} from './ivypinch';\r\n\r\n@Component({\r\n\tselector: 'pinch-zoom, [pinch-zoom]',\r\n    exportAs: 'pinchZoom',\r\n    templateUrl: './pinch-zoom.component.html',\r\n    styleUrls: ['./pinch-zoom.component.sass']\r\n})\r\n\r\nexport class PinchZoomComponent implements OnDestroy {\r\n\r\n    pinchZoom: any;\r\n    _properties: Properties;\r\n\r\n    @Input('properties') set properties(value: Properties) {\r\n        if (value) {\r\n            this._properties = value;\r\n        }\r\n    }\r\n    get properties() {\r\n        return this._properties;\r\n    }\r\n\r\n    @Input('transition-duration') transitionDuration = 200;\r\n    @Input('double-tap') doubleTap = true;\r\n    @Input('double-tap-scale') doubleTapScale = 2;\r\n    @Input('auto-zoom-out') autoZoomOut = false;\r\n    @Input('limit-zoom') limitZoom: number | \"original image size\";\r\n    @Input('disabled') disabled: boolean = false;\r\n    @Input() disablePan: boolean;\r\n    @Input() overflow: \"hidden\" | \"visible\";\r\n    @Input() zoomControlScale: number = 1;\r\n    @Input() disableZoomControl: \"disable\" | \"never\" | \"auto\";\r\n    @Input() backgroundColor: string = \"rgba(0,0,0,0.85)\";\r\n    @Input() limitPan: boolean;\r\n    @Input() minPanScale: number = 1.0001;\r\n    @Input() minScale: number = 0;\r\n    @Input() listeners: 'auto' | 'mouse and touch' = 'mouse and touch';\r\n    @Input() wheel: boolean = true;\r\n    @Input() autoHeight: boolean = false;\r\n    @Input() wheelZoomFactor: number = 0.2;\r\n    @Input() draggableImage: boolean = false;\r\n\r\n    @HostBinding('style.overflow')\r\n    get hostOverflow() {\r\n        return this.properties['overflow'];\r\n    }\r\n    @HostBinding('style.background-color')\r\n    get hostBackgroundColor() {\r\n        return this.properties['backgroundColor'];\r\n    }\r\n\r\n    get isTouchScreen() {\r\n        var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\r\n        var mq = function(query) {\r\n            return window.matchMedia(query).matches;\r\n        }\r\n\r\n        if (('ontouchstart' in window)) {\r\n            return true;\r\n        }\r\n\r\n        // include the 'heartz' as a way to have a non matching MQ to help terminate the join\r\n        // https://git.io/vznFH\r\n        var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\r\n        return mq(query);\r\n    }\r\n\r\n    get isDragging() {\r\n        return this.pinchZoom.isDragging();\r\n    }\r\n\r\n    get isDisabled() {\r\n        return this.properties['disabled'];\r\n    }\r\n\r\n    get scale() {\r\n        return this.pinchZoom.scale;\r\n    }\r\n\r\n    get isZoomedIn() {\r\n        return this.scale > 1;\r\n    }\r\n\r\n    constructor(private elementRef: ElementRef) {\r\n        this.applyOptionsDefault(defaultProperties, {});\r\n    }\r\n\r\n    ngOnInit(){\r\n        this.initPinchZoom();\r\n        \r\n        /* Calls the method until the image size is available */\r\n        this.pollLimitZoom();\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        let changedOptions = this.getProperties(changes);\r\n        changedOptions = this.renameProperties(changedOptions);\r\n\r\n        this.applyOptionsDefault(defaultProperties, changedOptions);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n\r\n    initPinchZoom() {\r\n        if (this.properties['disabled']) {\r\n            return;\r\n        }\r\n\r\n        this.properties['element'] = this.elementRef.nativeElement.querySelector('.pinch-zoom-content');\r\n        this.pinchZoom = new IvyPinch(this.properties);\r\n    }\r\n\r\n    getProperties(changes){\r\n        let properties = {};\r\n\r\n        for (var prop in changes) {\r\n            if (prop !== 'properties'){\r\n                properties[prop] = changes[prop].currentValue;\r\n            }\r\n            if (prop === 'properties'){\r\n                properties = changes[prop].currentValue;\r\n            }\r\n        }\r\n        return properties;\r\n    }\r\n\r\n    renameProperties(options: Properties) {\r\n        for (var prop in options) {\r\n            if (backwardCompatibilityProperties[prop]) {\r\n                options[backwardCompatibilityProperties[prop]] = options[prop];\r\n                delete options[prop];\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    applyOptionsDefault(defaultOptions, options): void {\r\n        this.properties = Object.assign({}, defaultOptions, options);\r\n    }\r\n\r\n    toggleZoom() {\r\n        this.pinchZoom.toggleZoom();\r\n    }\r\n\r\n    isControl() {\r\n        if (this.isDisabled) {\r\n            return false;\r\n        }\r\n\r\n        if (this.properties['disableZoomControl'] === \"disable\") {\r\n            return false;\r\n        }\r\n\r\n        if (this.isTouchScreen && this.properties['disableZoomControl'] === \"auto\") {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    pollLimitZoom() {\r\n        this.pinchZoom.pollLimitZoom();\r\n    }\r\n\r\n    destroy() {\r\n        this.pinchZoom.destroy();\r\n    }\r\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PinchZoomComponent } from './pinch-zoom.component';\n\n@NgModule({\n    declarations: [\n        PinchZoomComponent\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        PinchZoomComponent\n    ],\n    providers: [\n\n    ],\n    bootstrap: [\n        \n    ],\n    entryComponents: [\n        PinchZoomComponent\n    ]\n})\nexport class PinchZoomModule { }\n"],"names":["Properties","Component","ElementRef","Input","HostBinding","NgModule","CommonModule"],"mappings":"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"}